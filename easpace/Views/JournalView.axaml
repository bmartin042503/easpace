<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:easpace.ViewModels"
             xmlns:services="clr-namespace:easpace.Services"
             xmlns:models="clr-namespace:easpace.Models"
             xmlns:templatedControls="clr-namespace:easpace.Styles.TemplatedControls"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="easpace.Views.JournalView"
             x:DataType="vm:JournalViewModel"
             Background="{DynamicResource Neutral100}">

    <Grid RowDefinitions="Auto,Auto,*" Margin="26">

        <!-- Main title -->
        <TextBlock Grid.Row="0"
                   Text="{services:LocalizationService Key='JOURNAL_TITLE'}"
                   Classes="pageTitle" />

        <!-- Subtitle -->
        <TextBlock Grid.Row="1"
                   Text="{services:LocalizationService Key='JOURNAL_SUBTITLE'}"
                   Classes="pageSubTitle" />

        <!-- Main content -->
        <Border Grid.Row="2" Classes="primaryGradientCard"
                Margin="0,20,0,0">

            <Grid>
                
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="300" MinWidth="200" MaxWidth="350"/>
                    <ColumnDefinition Width="8"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Journal sidebar -->
                <Grid Margin="18" RowDefinitions="Auto,*" Grid.Column="0" RowSpacing="20">

                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="14">

                        <!-- Search box -->
                        <TextBox Grid.Column="0" Classes="searchBox"
                                 Watermark="{services:LocalizationService Key='SEARCH'}">
                            <TextBox.InnerRightContent>
                                <Viewbox Width="14" Height="14">
                                    <Path Data="{StaticResource MagnifyingGlassBoldIcon}" />
                                </Viewbox>
                            </TextBox.InnerRightContent>
                        </TextBox>

                        <!-- Add (plus) button -->
                        <Button Grid.Column="1" Classes="addPlusButton" HorizontalAlignment="Left">
                            <Viewbox Width="26" Height="26">
                                <Path Data="{StaticResource PlusCircleFillIcon}" />
                            </Viewbox>
                        </Button>
                    </Grid>

                    <!-- Journal entries -->
                    <ScrollViewer Grid.Row="1">
                        <ItemsControl ItemsSource="{Binding JournalEntries}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Vertical" Spacing="20" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>

                            <ItemsControl.DataTemplates>

                                <!-- Template for a single Journal entry -->
                                <DataTemplate DataType="models:JournalEntry">
                                    <templatedControls:JournalEntry
                                        HorizontalAlignment="Left"
                                        Title="{Binding Title}"
                                        Id="{Binding Id}"
                                        SelectedId="{Binding 
                                            RelativeSource={RelativeSource AncestorType=UserControl}, 
                                            Path=((vm:JournalViewModel)DataContext).SelectedJournalEntry.Id}"
                                        SelectCommand="{Binding 
                                            RelativeSource={RelativeSource AncestorType=UserControl}, 
                                            Path=((vm:JournalViewModel)DataContext).SelectJournalEntryCommand}" />

                                </DataTemplate>

                            </ItemsControl.DataTemplates>
                        </ItemsControl>
                    </ScrollViewer>

                </Grid>
                
                <GridSplitter Classes="horizontalSplitter" 
                              Grid.Column="1" ResizeDirection="Columns"
                              Margin="0,20" />

                <Grid Grid.Column="2" RowDefinitions="Auto,*" ColumnDefinitions="*,Auto"
                      Margin="18" RowSpacing="20">
                    <TextBlock Classes="journalTitle" Text="Journal Title" Grid.Column="0" Grid.Row="0"/>
                    
                    <!-- Interaction buttons -->
                    <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
                        <Button Classes="editButton">
                            <Grid ColumnDefinitions="Auto,*" ColumnSpacing="8">
                                <TextBlock Grid.Column="0"
                                           Text="{services:LocalizationService Key='EDIT'}" />
                                <Viewbox Grid.Column="1" Width="10" Height="10">
                                    <Path Data="{StaticResource PencilFillIcon}" />
                                </Viewbox>
                            </Grid>
                        </Button>
                    </StackPanel>
                    
                    <TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                               TextWrapping="Wrap"
                               Text="Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet. "/>
                </Grid>
                
            </Grid>
            
            

        </Border>
    </Grid>
</UserControl>
